# Platform configuration
CONFIG_BOARD_XIAOMI=y

# Set Custom localversion
CONFIG_LOCALVERSION="-perf"
CONFIG_LOCALVERSION_AUTO=y

# Increase logbuffer size
CONFIG_LOG_BUF_SHIFT=21

# Enable pstore and mtd oops
CONFIG_CMDLINE="cgroup_disable=pressure ramoops_memreserve=4M"
CONFIG_PSTORE=y
CONFIG_PSTORE_CONSOLE=y
CONFIG_PSTORE_PMSG=y
CONFIG_PSTORE_RAM=y
CONFIG_MTD=y
CONFIG_MTD_BLOCK=y
CONFIG_MTD_OOPS=y
CONFIG_MTD_BLOCK2MTD=y
# CONFIG_PANIC_ON_OOPS is not set

# Enable UTS Namespace
CONFIG_UTS_NS=y

# Disable Modules signature
# CONFIG_MODULE_SIG is not set

# Enable Frequency statistics
CONFIG_CPU_FREQ_STAT=y

# Disable Wilocity wil6210 driver
# CONFIG_WIL6210 is not set

# Disable DebugFS
# CONFIG_DEBUG_FS is not set

# Enable NAT, PEDIT and CSUM classifier Actions
CONFIG_NET_ACT_NAT=y
CONFIG_NET_ACT_PEDIT=y
CONFIG_NET_ACT_CSUM=y

# Enable CNSS QCA6390 chipset support
CONFIG_CNSS_QCA6390=y

# Disable Open-channel SSD target support
# CONFIG_NVM is not set

# Disable QTI Haptics
# CONFIG_INPUT_QTI_HAPTICS is not set

# Enable AWINIC AW8697 haptics driver
CONFIG_INPUT_AW8697_HAPTIC=y

# Disable support for Virtual terminal
# CONFIG_VT is not set

# Enable high performance logchar driver
CONFIG_XLOGCHAR=y

# Enable SPI connected IR LED support
CONFIG_RC_CORE=y
CONFIG_LIRC=y
CONFIG_RC_DECODERS=y
CONFIG_RC_DEVICES=y
CONFIG_IR_SPI=y

# Disable V4L2 Videobuf2 Core
# CONFIG_VIDEO_V4L2_VIDEOBUF2_CORE is not set

# Disable USB Serial converter support
# CONFIG_USB_SERIAL is not set

# Enable USB Remote NDIS support
CONFIG_USB_CONFIGFS_RNDIS=y

# Disable APP Armor security
# CONFIG_SECURITY_APPARMOR is not set

# Disable USB CDC ADM support
# CONFIG_USB_ACM is not set

# Disable MSM 11AD chip support
# CONFIG_MSM_11AD is not set

# Disable PASR
# CONFIG_MEMORY_HOTPLUG is not set
# CONFIG_QCOM_MEM_OFFLINE is not set

# Disable QTI XR Reference device Misc driver
# CONFIG_QTI_XR_SMRTVWR_MISC is not set

# Disable Semtech SX150x I2C GPIO expander pinctrl driver
# CONFIG_PINCTRL_SX150X is not set

# Disable nvensense CH-101 ultra-low Time-of-Flight sensor 
# CONFIG_CH101_I2C is not set

# Disable ADS7052 TDK Thermistor
# CONFIG_ADS7052_TDK_THERMISTOR is not set

# Enable Fingerprint support
CONFIG_INPUT_FINGERPRINT=y

# Disable ST FTS
# CONFIG_TOUCHSCREEN_FTS is not set

# Enable Touchfeature driver
CONFIG_TOUCHSCREEN_XIAOMI_TOUCHFEATURE=y

# Disable qcom smb1390 and smb1355
# CONFIG_SMB1390_CHARGE_PUMP_PSY is not set
# CONFIG_SMB1355_SLAVE_CHARGER is not set

# Disable Halo Microelectronics HL6111R
# CONFIG_HL6111R is not set

# Disable AUDIT
# CONFIG_AUDIT is not set

# Increase FRAME_WARN size to 4096
CONFIG_FRAME_WARN=4096

# Enable DevFreq Boost
CONFIG_DEVFREQ_BOOST=y
CONFIG_DEVFREQ_INPUT_BOOST_DURATION_MS=58
CONFIG_DEVFREQ_CPU_LLCC_DDR_BW_BOOST_FREQ=2597

# Bitmask of available LITTLE/BIG/PRIME CPUs
CONFIG_LITTLE_CPU_MASK=15
CONFIG_BIG_CPU_MASK=112
CONFIG_PRIME_CPU_MASK=128

# Enable CPU input boost
CONFIG_CPU_INPUT_BOOST=y
CONFIG_INPUT_BOOST_DURATION_MS=58
CONFIG_WAKE_BOOST_DURATION_MS=100
CONFIG_INPUT_BOOST_FREQ_LP=0
CONFIG_INPUT_BOOST_FREQ_PERF=0
CONFIG_INPUT_BOOST_FREQ_PRIME=0
CONFIG_MAX_BOOST_FREQ_LP=1708800
CONFIG_MAX_BOOST_FREQ_PERF=1766400
CONFIG_MAX_BOOST_FREQ_PRIME=1862400

# Enable schedhorizon cpufreq governor
CONFIG_CPU_FREQ_GOV_SCHEDHORIZON=y
# Enable SCHEDUTIL_(UP|DOWN)_RATE_LIMIT
CONFIG_SCHEDUTIL_UP_RATE_LIMIT=4000
CONFIG_SCHEDUTIL_DOWN_RATE_LIMIT=16000

# Enable Android simple lmk
CONFIG_ANDROID_SIMPLE_LMK=y

# Disable Pressure stall information tracking
# CONFIG_PSI is not set

# Disable Memory controller
# CONFIG_MEMCG is not set
# CONFIG_MEMCG_SWAP is not set

#Enable Xiaomi MIUI/HyperOS optimization
CONFIG_MIHW=y
CONFIG_PACKAGE_RUNTIME_INFO=y
CONFIG_PERF_HUMANTASK=y
CONFIG_PERF_CRITICAL_RT_TASK=y
CONFIG_SF_BINDER=y
CONFIG_BINDER_OPT=y
CONFIG_MIGT=y
CONFIG_MILLET=y
CONFIG_MIGT_ENERGY_MODEL=y

# IRQ SBALANCE
CONFIG_IRQ_SBALANCE=y
CONFIG_IRQ_SBALANCE_POLL_MSEC=10000
CONFIG_SBALANCE_EXCLUDE_CPUS="3,6,7"

# Enable Timer events oriented (TEO) governor
CONFIG_CPU_IDLE_GOV_TEO=y

# Enable CPUSet Assist
CONFIG_CPUSET_ASSIST=y
CONFIG_CPUSET_AUDIO_APP="0-3"
CONFIG_CPUSET_BG="0-3"
CONFIG_CPUSET_CAMERA="0-7"
CONFIG_CPUSET_DISPLAY="0-6"
CONFIG_CPUSET_FG="0-6"
CONFIG_CPUSET_RESTRICTED="0-3"
CONFIG_CPUSET_SYSTEM_BG="0-3"
CONFIG_CPUSET_TOP_APP="0-7"
